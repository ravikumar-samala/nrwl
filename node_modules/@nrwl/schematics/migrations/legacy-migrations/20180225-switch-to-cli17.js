"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const workspace_1 = require("@nrwl/workspace");
const fs_1 = require("fs");
exports.default = {
    description: 'Switch to Angular CLI 1.7',
    run: () => {
        workspace_1.updateJsonFile('package.json', json => {
            json.devDependencies = Object.assign({}, json.devDependencies, { '@angular/cli': '1.7.1', '@angular/compiler-cli': '5.2.7', '@angular/language-service': '5.2.7', '@types/jasmine': '~2.5.53', ['@angular-devkit/core']: undefined, ['@angular-devkit/schematics']: undefined, ['@schematics/angular']: undefined, ['karma-cli']: undefined });
            json.dependencies = Object.assign({}, json.dependencies, { '@angular/animations': '5.2.7', '@angular/common': '5.2.7', '@angular/compiler': '5.2.7', '@angular/core': '5.2.7', '@angular/forms': '5.2.7', '@angular/platform-browser': '5.2.7', '@angular/platform-browser-dynamic': '5.2.7', '@angular/router': '5.2.7', '@ngrx/effects': '5.1.0', '@ngrx/router-store': '5.0.1', '@ngrx/store': '5.1.0', '@ngrx/store-devtools': '5.1.0' });
            if (json.dependencies['@angular/http']) {
                json.dependencies['@angular/http'] = '5.2.7';
            }
        });
        try {
            fs_1.unlinkSync('.angular_cli165.tgz');
        }
        catch (e) { }
    }
};
