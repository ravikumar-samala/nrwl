"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const schematics_1 = require("@angular-devkit/schematics");
const workspace_1 = require("@nrwl/workspace");
const tasks_1 = require("@angular-devkit/schematics/tasks");
function updateDependencies() {
    return workspace_1.updateJsonInTree('package.json', json => {
        json.dependencies = json.dependencies || {};
        json.dependencies = Object.assign({}, json.dependencies, { '@ngrx/effects': '6.1.0', '@ngrx/store': '6.1.0', '@ngrx/router-store': '6.1.0' });
        json.devDependencies = json.devDependencies || {};
        json.devDependencies = Object.assign({}, json.devDependencies, { '@angular/cli': '6.2.4', '@angular-devkit/build-angular': '~0.8.0', '@ngrx/store-devtools': '6.1.0', karma: '~3.0.0', 'karma-coverage-istanbul-reporter': '~2.0.1', protractor: '~5.4.0', 'ts-node': '~7.0.0', tslint: '~5.11.0', typescript: '~2.9.2' });
        if (json.devDependencies['@angular-devkit/build-ng-packagr']) {
            json.devDependencies['@angular-devkit/build-ng-packagr'] = '~0.8.0';
        }
        return json;
    });
}
const addInstall = (_, context) => {
    context.addTask(new tasks_1.NodePackageInstallTask());
};
function default_1() {
    return schematics_1.chain([updateDependencies(), addInstall]);
}
exports.default = default_1;
